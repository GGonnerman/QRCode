import unittest

from error_correction import ErrorCorrection
from mode import Mode
from qrcode import QRCode


# TODO: Add some more incremental test, like for specific modes
class TestQRCode(unittest.TestCase):
    def test_generate(self):
        qrcode = QRCode(
            version=5,
            error_correction_level=ErrorCorrection.LOW,
            mask_pattern=0b111,
        )

        qrcode.add_data("THIS IS A LONG STRING OF TEXT THAT VERSION ", Mode.ALPHANUMERIC)
        qrcode.add_data("314159265358979323846264338327950", Mode.NUMERIC)
        qrcode.add_data("茗荷", Mode.KANJI)
        qrcode.add_data(" Leicester city is number ", Mode.BINARY)
        qrcode.add_data("1", Mode.NUMERIC)
        qrcode.add_data(" BEST FOOTBALL TEAM", Mode.ALPHANUMERIC)
        qrcode.add_data("!!!", Mode.BINARY)
        qrcode.generate()

        self.assertEqual(
            "1111111000100101101111110011101111111100000101110001101001111000110100000110111010100000100110000100100010111011011101001001111101010111111001011101101110101110110001100010001000101110110000010101010000001111010011010000011111111010101010101010101010101111111000000001011001101101111110110000000011010011000111100000101100010011101101100110001011111111010100000111011100001101110011111111110101111101100010011101001100111001011110000011111111100001101100011000011111101100101000100001011010001001111011111001100000100010011111000110110110101110100010101001010000000110000110001000100100101010101101101000000001011011001110101100010111100111000000100000011101010001011101001011101000110010011000110100011010010001010010111000110101000101011110011110100101011000010001101010100100000100000010011111001001101110100011010111100000110000011010100001011110100011001100101111010111010100111011101000101011000100110001000101111001110010001000111010110011011001001110110010101010111110101100101010101100010010100110000000001011111111000100001000111000111100000011011110010111111000100000000111101110000010011011000100011111111011001110111011101000101010001100000100011010111001101000010001001110111010010111001000110011011111110101011101011111100010011010010100011000101110100100111000010010010111111110110000010111111100010111001000000111111111111011100010010001010111011110111",
            str(qrcode),
        )
