import unittest

from error_correction import ErrorCorrection
from mode import Mode
from qrcode import DetailedQRCode


# TODO: Add some more incremental test, like for specific modes
class TestQRCode(unittest.TestCase):
    def test_generate(self):
        qrcode = DetailedQRCode(
            version=5,
            error_correction_level=ErrorCorrection.LOW,
            mask_pattern=0b111,
        )

        qrcode.add_data("THIS IS A LONG STRING OF TEXT THAT VERSION ", Mode.ALPHANUMERIC)
        qrcode.add_data("314159265358979323846264338327950", Mode.NUMERIC)
        qrcode.add_data("茗荷", Mode.KANJI)
        qrcode.add_data(" Leicester city is number ", Mode.BINARY)
        qrcode.add_data("1", Mode.NUMERIC)
        qrcode.add_data(" BEST FOOTBALL TEAM", Mode.ALPHANUMERIC)
        qrcode.add_data("!!!", Mode.BINARY)
        qrcode.generate()

        self.assertEqual(
            "1111111000100001000010100111001111111100000101110011100110111100010100000110111010100000100101110001000010111011011101001001101100100011101101011101101110101110110010011000100000101110110000010101011001101100100010010000011111111010101010101010101010101111111000000001011001011010110101010000000011010011000110100110101110101011101101010110111011001110101011101100001010011010101011100011000010001000101100000101000100110010100000011110011101000111111001010001110010000000010100000010000001001010101001111101110110011101001010011101000000110101110010100100010110111010011111011000100110010000101100101100110110010011100101000110001101001100011101011111000111111111100101101111011100010111001100111001100100101001010110110011011001101100110001000111011010110100101110100100110000100000000010000111001100000100101010110000101010000001011111010111101000001110100000001100000010011001100000010010101001001110111011111000101100011011001011010010111000100100000001001110001111010101011000010001001000110100110000100110101110001001011100101011111100100010111000011010110011111110100000000111101111010111011011000111101111111011100010110001000111101010110100000100001001111111101011110001010010111010010111101010111010011111111011011101010100101010111111111101101000101110100000010011111110011101010110110000010101101110000011010111111000011111111010001010101010001011001110101",
            str(qrcode),
        )
